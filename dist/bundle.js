(()=>{"use strict";function e(e,n){var r="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!r){if(Array.isArray(e)||(r=function(e,n){if(e){if("string"==typeof e)return t(e,n);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?t(e,n):void 0}}(e))||n&&e&&"number"==typeof e.length){r&&(e=r);var o=0,a=function(){};return{s:a,n:function(){return o>=e.length?{done:!0}:{done:!1,value:e[o++]}},e:function(e){throw e},f:a}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var l,u=!0,i=!1;return{s:function(){r=r.call(e)},n:function(){var e=r.next();return u=e.done,e},e:function(e){i=!0,l=e},f:function(){try{u||null==r.return||r.return()}finally{if(i)throw l}}}}function t(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}!function(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"+7 (___) ___-__-__",r=document.querySelectorAll(t);function o(e){var t=e.keyCode,r=n,o=r.replace(/\D/g,""),a=this.value.replace(/\D/g,""),l=0,u=r.replace(/[_\d]/g,(function(e){return l<a.length?a.charAt(l++)||o.charAt(l):e}));-1!==(l=u.indexOf("_"))&&(u=u.slice(0,l));var i=r.substr(0,this.value.length).replace(/_+/g,(function(e){return"\\d{1,"+e.length+"}"})).replace(/[+()]/g,"\\$&");(!(i=new RegExp("^"+i+"$")).test(this.value)||this.value.length<5||t>47&&t<58)&&(this.value=u),"blur"==e.type&&this.value.length<5&&(this.value="")}var a,l=e(r);try{for(l.s();!(a=l.n()).done;){var u=a.value;u.addEventListener("input",o),u.addEventListener("focus",o),u.addEventListener("blur",o)}}catch(e){l.e(e)}finally{l.f()}}('input[name="phone"]',"+7 (___) ___-__-__");var n,r,o,a,l,u,i;u=document.querySelector(".header"),i=document.querySelector(".modal"),u.addEventListener("click",(function(e){e.target.closest(".brief")&&i.classList.add("modal--open"),i.classList.contains("modal--open")&&(i.addEventListener("click",(function(e){(e.target.classList.contains("close")||e.target.classList.contains("modal__body"))&&(i.classList.remove("modal--open"),document.body.style.overflow="auto")})),document.body.style.overflow="hidden")})),document.querySelectorAll("input").forEach((function(e){e.addEventListener("input",(function(){var t=e.closest("form").querySelector("button");"name"===e.getAttribute("name")?(e.value.length<2?t.disabled=!0:t.removeAttribute("disabled"),e.value.length<51?e.value=e.value.replace(/[^а-яА-Я-\s]/gi,""):e.value=e.value.substring(0,50),e.value=e.value.replace(/(|\s+)\S/g,(function(e){return e.toLowerCase()})),e.value=e.value.replace(/(^|\s)\S/g,(function(e){return e.toUpperCase()}))):"email"===e.getAttribute("name")?(t.disabled=!0,e.value=e.value.replace(/[^a-zA-z@-_.!~*']/gi,""),e.value.match(/\w+@\w+\.\w{2,3}/)&&t.removeAttribute("disabled")):"phone"===e.getAttribute("name")?e.value.length<18?t.disabled=!0:t.removeAttribute("disabled"):"message"===e.getAttribute("name")&&(e.value=e.value.replace(/[a-zA-Z]/,""))}))})),r="Что-то пошло не так...",o="Спасибо! Мы скоро с вами свяжемся!",a=document.querySelectorAll("form"),(l=document.createElement("div")).style.cssText="font-size: 2rem; color: #191B1D; text-align: center; margin-top: 20px;",a.forEach((function(e){var t=e.querySelectorAll("input");e.addEventListener("submit",(function(n){n.preventDefault(),e.querySelector(".modal-content").append(l),l.innerHTML="Загрузка...";var a=new FormData(e),u={};a.forEach((function(e,t){u[t]=e})),function(e){return fetch("./server.php",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)})}(u).then((function(e){if(200!==e.status)throw new Error("status network not 200");!function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:3e3;l.textContent=o,setTimeout((function(){l.textContent=""}),e)}()})).catch((function(e){return function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:3e3;l.textContent=r,console.error(e),setTimeout((function(){l.textContent=""}),t)}(e)})).finally((function(){t.forEach((function(e){e.value=""}))}))}))})),n=document.querySelector(".file__input"),document.querySelector(".file__button").addEventListener("click",(function(){n.click()}))})();